YUI.add("privacy-helper",(function(i){i.PrivacyHelper={mapPrivacy:function(i){var s,e,l,y,b;return s={isPublic:!1,isVisibleByFriends:!1,isVisibleByFamily:!1},e={isPublic:!0,isVisibleByFriends:!1,isVisibleByFamily:!1},l={isPublic:!1,isVisibleByFriends:!0,isVisibleByFamily:!1},y={isPublic:!1,isVisibleByFriends:!1,isVisibleByFamily:!0},b={isPublic:!1,isVisibleByFriends:!0,isVisibleByFamily:!0},"object"==typeof i?i.isPublic?"public":i.isVisibleByFriends&&i.isVisibleByFamily?"friendsandfamily":i.isVisibleByFamily?"family":i.isVisibleByFriends?"friends":"private":"public"===i?e:"friendsandfamily"===i?b:"friends"===i?l:"family"===i?y:s}}}),"@VERSION@",{requires:[]});YUI.add("hermes-template-license-history",(function(t,e){var n=t.Template.Handlebars.revive({1:function(t,e,n,l,a){var s,o=null!=e?e:t.nullContext||{},r=t.hooks.helperMissing,i=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"\t\t\t\t<tr>\n\t\t\t\t\t<th>"+i((c(n,"intlMessage")||e&&c(e,"intlMessage")||r).call(o,{name:"intlMessage",hash:{intlName:"search.DATE"},data:a,loc:{start:{line:7,column:9},end:{line:7,column:47}}}))+'</th>\n\t\t\t\t\t<td class="word-wrap">'+i((c(n,"intlMessage")||e&&c(e,"intlMessage")||r).call(o,{name:"intlMessage",hash:{dateChange:null!=e?c(e,"dateChange"):e,intlName:"photo-page-scrappy.LICENSE_DATE_OLD_NEW"},data:a,loc:{start:{line:8,column:27},end:{line:8,column:115}}}))+"</td>\n\t\t\t\t</tr>\n"+(null!=(s=c(n,"if").call(o,null!=e?c(e,"newLicense"):e,{name:"if",hash:{},fn:t.program(2,a,0),inverse:t.program(4,a,0),data:a,loc:{start:{line:10,column:4},end:{line:24,column:11}}}))?s:"")},2:function(t,e,n,l,a){var s,o=null!=e?e:t.nullContext||{},r=t.hooks.helperMissing,i=t.escapeExpression,c="function",u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>"+i((u(n,"intlMessage")||e&&u(e,"intlMessage")||r).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.OLD_LICENSE"},data:a,loc:{start:{line:12,column:10},end:{line:12,column:67}}}))+'</th>\n\t\t\t\t\t\t<td><a href="'+i(typeof(s=null!=(s=u(n,"oldLicenseUrl")||(null!=e?u(e,"oldLicenseUrl"):e))?s:r)===c?s.call(o,{name:"oldLicenseUrl",hash:{},data:a,loc:{start:{line:13,column:19},end:{line:13,column:36}}}):s)+'" target="_blank">'+i(typeof(s=null!=(s=u(n,"oldLicense")||(null!=e?u(e,"oldLicense"):e))?s:r)===c?s.call(o,{name:"oldLicense",hash:{},data:a,loc:{start:{line:13,column:54},end:{line:13,column:68}}}):s)+'</a></td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr class="history-new-license">\n\t\t\t\t\t\t<th>'+i((u(n,"intlMessage")||e&&u(e,"intlMessage")||r).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.NEW_LICENSE"},data:a,loc:{start:{line:16,column:10},end:{line:16,column:67}}}))+'</th>\n\t\t\t\t\t\t<td><a href="'+i(typeof(s=null!=(s=u(n,"newLicenseUrl")||(null!=e?u(e,"newLicenseUrl"):e))?s:r)===c?s.call(o,{name:"newLicenseUrl",hash:{},data:a,loc:{start:{line:17,column:19},end:{line:17,column:36}}}):s)+'" target="_blank">'+i(typeof(s=null!=(s=u(n,"newLicense")||(null!=e?u(e,"newLicense"):e))?s:r)===c?s.call(o,{name:"newLicense",hash:{},data:a,loc:{start:{line:17,column:54},end:{line:17,column:68}}}):s)+"</a></td>\n\t\t\t\t\t</tr>\n"},4:function(t,e,n,l,a){var s,o=null!=e?e:t.nullContext||{},r=t.hooks.helperMissing,i=t.escapeExpression,c="function",u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>"+i((u(n,"intlMessage")||e&&u(e,"intlMessage")||r).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ORIGINAL_LICENSE"},data:a,loc:{start:{line:21,column:10},end:{line:21,column:72}}}))+'</th>\n\t\t\t\t\t\t<td><a href="'+i(typeof(s=null!=(s=u(n,"oldLicenseUrl")||(null!=e?u(e,"oldLicenseUrl"):e))?s:r)===c?s.call(o,{name:"oldLicenseUrl",hash:{},data:a,loc:{start:{line:22,column:19},end:{line:22,column:36}}}):s)+'" target="_blank">'+i(typeof(s=null!=(s=u(n,"oldLicense")||(null!=e?u(e,"oldLicense"):e))?s:r)===c?s.call(o,{name:"oldLicense",hash:{},data:a,loc:{start:{line:22,column:54},end:{line:22,column:68}}}):s)+"</a></td>\n\t\t\t\t\t</tr>\n"},compiler:[8,">= 4.3.0"],main:function(t,e,n,l,a){var s,o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\n<div class="license-history">\n\t<div class="license-history-modal-table-div">\n\t\t<table class="unfluid license-history-table" align= "left">\n'+(null!=(s=o(n,"each").call(null!=e?e:t.nullContext||{},null!=e?o(e,"licenses"):e,{name:"each",hash:{},fn:t.program(1,a,0),inverse:t.noop,data:a,loc:{start:{line:5,column:3},end:{line:25,column:12}}}))?s:"")+"\t\t</table>\n\t</div>\n</div>\n"},useData:!0}),l={};t.Array.each([],(function(e){var n=t.Template.get("hermes/"+e);n&&(l[e]=n)})),t.Template.register("hermes/license-history",(function(e,a){return(a=a||{}).partials=a.partials?t.merge(l,a.partials):l,n(e,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("license-history-view",(function(e,i){var t=require("hermes-core/flog")(i);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.photoId=e.photoId,this.licenses=[],this.licenseDateInNote=new Date("Tue Jul 17 2008 12:00:00 GMT-0800 (Pacific Standard Time)"),this.errorLoading=!1,this.modalErrorText,this},buildContainer:function(){return this.setContainerWithTemplate("license-history",{licenses:this.licenses}),this},loadState:function(){return this.modalErrorText=this.intlMessage({intlName:"errors.ERROR_HAS_OCCURRED"}),this.appContext.callAPI("flickr.photos.licenses.getLicenseHistory",{photo_id:this.photoId}).then(function(e){this.licenses=this.formatLicenses(e.licenseHistory)}.bind(this)).catch(function(e){this.errorLoading=!0,t.log("Error loading license-history-view",e)}.bind(this))},activate:function(){var i=this;return this.registerEventHandler(e.on("licenseHistoryModal:activate",(function(){i.errorLoading&&e.fire("modal:updateText",{errorText:i.modalErrorText}),i.licenses.length&&i.setLicenseModalFirstDate(i.licenses[0].dateChange)}))),this},getLicenseName:function(e){return{"All Rights Reserved":this.intlMessage({intlName:"common.LICENSE_TITLE_0"}),"Attribution-NonCommercial-ShareAlike License":this.intlMessage({intlName:"common.LICENSE_TITLE_1"}),"Attribution-NonCommercial License":this.intlMessage({intlName:"common.LICENSE_TITLE_2"}),"Attribution-NonCommercial-NoDerivs License":this.intlMessage({intlName:"common.LICENSE_TITLE_3"}),"Attribution License":this.intlMessage({intlName:"common.LICENSE_TITLE_4"}),"Attribution-ShareAlike License":this.intlMessage({intlName:"common.LICENSE_TITLE_5"}),"Attribution-NoDerivs License":this.intlMessage({intlName:"common.LICENSE_TITLE_6"}),"No known copyright restrictions":this.intlMessage({intlName:"common.LICENSE_TITLE_7"}),"United States Government Work":this.intlMessage({intlName:"common.LICENSE_TITLE_8"}),"Public Domain Dedication (CC0)":this.intlMessage({intlName:"common.LICENSE_TITLE_9"}),"Public Domain Mark":this.intlMessage({intlName:"common.LICENSE_TITLE_10"})}[e]},getLicenseUrl:function(e,i){return"All Rights Reserved"===e?"https://flickrhelp.com/hc/en-us/articles/4404078674324-Change-Your-Photo-s-License-in-Flickr":i},setLicenseModalFirstDate:function(i){this.licenseDateInNote>i&&e.fire("modal:updateText",{extra:this.intlMessage({intlName:"photo-page-scrappy.LICENSE_HISTORY_DATE",firstLicenseDate:i})})},formatLicenses:function(e){var i=this;return e&&e.length>0?e.map((function(e){return{oldLicense:i.getLicenseName(e.oldLicense),oldLicenseUrl:i.getLicenseUrl(e.oldLicense,e.oldLicenseUrl),newLicense:i.getLicenseName(e.newLicense),newLicenseUrl:i.getLicenseUrl(e.newLicense,e.newLicenseUrl),dateChange:new Date(1e3*e.dateChange)}})):(this.errorLoading=!0,[])}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-license-history","url"],optionalRequires:["hermes-core"],optional:[],langBundles:["common","photo-page-scrappy","errors","search"]});YUI.add("sub-photo-additional-info-view",(function(e,t){var i=require("hermes-core/flog")(t),n={working:"working",apiError:"api-error",ready:"ready"};e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.nsid=e.nsid,this.photoId=e.photoId,this.backToURL=e.backToURL,this.isModerated=e.isModerated,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.privacyPermissionsMenuItems=[{value:"public",text:this.intlMessage({intlName:"settings.PUBLIC"})},{value:"private",text:this.intlMessage({intlName:"settings.PRIVATE"})},{value:"friends",text:this.intlMessage({intlName:"settings.FRIENDS"})},{value:"family",text:this.intlMessage({intlName:"settings.FAMILY"})},{value:"friendsandfamily",text:this.intlMessage({intlName:"settings.FRIENDS_AND_FAMILY"})}],this.printPermissionMenuItems=[{value:0,text:this.intlMessage({intlName:"settings.ONLY_YOU"})},{value:1,text:this.intlMessage({intlName:"settings.FRIENDS"})},{value:2,text:this.intlMessage({intlName:"settings.FAMILY"})},{value:3,text:this.intlMessage({intlName:"settings.FRIENDS_AND_FAMILY"})},{value:4,text:this.intlMessage({intlName:"settings.PEOPLE_YOU_FOLLOW"})},{value:5,text:this.intlMessage({intlName:"settings.ANY_FLICKR_MEMBER"})},{value:6,text:this.intlMessage({intlName:"settings.PUBLIC"})}],this.commentingPermissionsMenuItems=[{value:0,text:this.intlMessage({intlName:"settings.ONLY_YOU"})},{value:1,text:this.intlMessage({intlName:"settings.FRIENDS_AND_FAMILY"})},{value:2,text:this.intlMessage({intlName:"settings.PEOPLE_YOU_FOLLOW"})},{value:3,text:this.intlMessage({intlName:"settings.ANY_FLICKR_MEMBER"})}],this.metaPermissionsMenuItems=[{value:0,text:this.intlMessage({intlName:"settings.ONLY_YOU"})},{value:1,text:this.intlMessage({intlName:"settings.FRIENDS_AND_FAMILY"})},{value:2,text:this.intlMessage({intlName:"settings.PEOPLE_YOU_FOLLOW"})},{value:3,text:this.intlMessage({intlName:"settings.ANY_FLICKR_MEMBER"})}],this.videoContentTypeMenuItems=[{value:0,text:this.intlMessage({intlName:"common.VIDEO"})},{value:1,text:this.intlMessage({intlName:"common.SCREENCAST"})},{value:2,text:this.intlMessage({intlName:"common.ANIMATION_CGI"})},{value:3,text:this.intlMessage({intlName:"common.MACHINIMA"})}],this.photoContentTypeMenuItems=[{value:0,text:this.intlMessage({intlName:"common.PHOTO"})},{value:1,text:this.intlMessage({intlName:"common.SCREENSHOT"})},{value:2,text:this.intlMessage({intlName:"common.ILLUSTRATION_ART"})},{value:3,text:this.intlMessage({intlName:"common.VIRTUAL_PHOTOGRAPHY"})}],this.safetyLevelMenuItems=[{value:0,text:this.intlMessage({intlName:"settings.SAFE"})},{value:1,text:this.intlMessage({intlName:"settings.MODERATE"})},{value:2,text:this.intlMessage({intlName:"settings.RESTRICTED"})}],this},loadState:function(){var t=this,i={};return i.photo=this.appContext.getModel("photo-models",this.photoId),i.privacy=this.appContext.getModel("photo-privacy-models",this.photoId),this.appContext.getViewer().signedIn&&(i.personPreferences=this.appContext.getModel("person-preferences-models",this.appContext.getViewer().nsid)),new e.FlickrPromise(i).then((function(e){t.set("photo",e.photo),t.set("privacy",e.privacy),e.personPreferences&&t.set("personPreferences",e.personPreferences)}))},buildContainer:function(){var t,i=this.get("photo"),n=this.get("privacy").toJSON(),s=i.getValue("owner").getValue("isMe"),o=!s&&this.appContext.getViewer().signedIn,a=!this.appContext.flipper.isFlipped("enable-scrappy-notes"),r=s,l=!1,c=!1;s&&i.getValue("isVideo")&&(i.getValue("isVideoPending")||i.getValue("isVideoFailed"))&&(r=!1,l=i.getValue("isVideoPending"),c=i.getValue("isVideoFailed"));var m=this.commentingPermissionsMenuItems.find((e=>e.value===this.get("privacy").getValue("permComment")));m=m?m.text:"---";var p=this.privacyPermissionsMenuItems.find((t=>t.value===e.PrivacyHelper.mapPrivacy(n)));p=p?p.text:"---";var h=this.metaPermissionsMenuItems.find((e=>e.value===this.get("privacy").getValue("permAddMeta")));h=h?h.text:"---";var u,d=this.printPermissionMenuItems.find((e=>e.value===n.permPrint));d=d?d.text:"---",u=i.getValue("isVideo")?(u=this.videoContentTypeMenuItems.find((e=>e.value===i.getValue("contentType"))))?u.text:"---":(u=this.photoContentTypeMenuItems.find((e=>e.value===i.getValue("contentType"))))?u.text:"---";var g=this.safetyLevelMenuItems.find((e=>e.value===i.getValue("safetyLevel")));return g=g?g.text:"---",t={safetyLevel:i.getValue("safetyLevel"),privacy:n,commentingPermission:n.permComment,addMetaPermission:n.permAddMeta,printPermission:n.permPrint,privacySelected:e.PrivacyHelper.mapPrivacy(n).toLowerCase(),contentType:i.getValue("contentType"),privacyIsEditable:r,wasModerated:this.isModerated&&i.getValue("systemModerated"),commentingIsEditable:s,metadataIsEditable:s,printIsEditable:s&&!i.getValue("isVideo"),safetyIsEditable:s,contentTypeIsEditable:s,isVideo:i.getValue("isVideo"),videoIsPending:l,videoHasFailed:c,showFlagPhoto:o,showFeedback:a,commentingLevel:m,privacyLevel:p,metaLevel:h,selectedSafetyLevel:g,printLevel:d,selectedContentType:u},this.setContainerWithTemplate("sub-photo-additional-info",t),this},activate:function(){var t=this,i=this.get("photo"),n=this.get("privacy"),s=(i.getValue("owner").getValue("isMe"),this.get("container")),o=s.one(".moderation-tooltip"),a=s.one(".flag-photo");n&&this.registerEventHandler(n.on("valuesChanged",(function(i){var o=e.PrivacyHelper.mapPrivacy(n.toJSON());s.one(".c-charm-item-privacy i").hasClass("ui-icon-tiny-privacy"+o.toLowerCase())||t.privacyDd.select(o)}))),o&&this.registerEventHandler(o.on("click",this.handleModerationTooltipClick.bind(this))),a&&this.registerEventHandler(a.on("click",this.handleFlagPhotoClick,this));var r=s.one(".privacy-permissions-button"),l=s.one(".commenting-button"),c=s.one(".meta-permissions-button"),m=s.one(".safety-level-button"),p=s.one(".content-type-button");if(r&&this.registerEventHandler(r.on("click",this.handlePrivacyClick.bind(this))),l&&this.registerEventHandler(l.on("click",this.handleCommentingPermissionsClick.bind(this))),c&&this.registerEventHandler(c.on("click",this.handleMetadataPermissionsClick.bind(this))),m&&this.registerEventHandler(m.on("click",this.handleSafetyLevelClick.bind(this))),p&&this.registerEventHandler(p.on("click",this.handleContentTypeClick.bind(this))),this.appContext.flipper.isFlipped("enable-license-history-modal")&&s.one(".show-license-history").on("click",function(e){e.preventDefault(),this.showLicenseHistoryModal()}.bind(this)),this.appContext.flipper.isFlipped("enable-others-to-print")){var h=s.one(".print-permissions-button");h&&this.registerEventHandler(h.on("click",this.handlePrintPermissionsClick.bind(this)))}return this},setSafetyLevel:function(e){var t=this,s=this.get("photo"),o=s.getValue("safetyLevel"),a=this.get("container").one(".c-charm-item-safetylevel"),r=this.get("container").one(".c-charm-item-safetylevel i"),l=this.get("container").one(".moderation-tooltip");e!==o&&l&&l.setStyle("display","none"),s.setValue("safetyLevel",e),r.replaceClass("ui-icon-tiny-safety-"+o,"ui-icon-tiny-safety-"+e),a&&(a.addClass(n.working),a.removeClass(n.apiError)),"restricted"===e?this.fire("subviewViewEvent","disable-sharing"):this.fire("subviewViewEvent","enable-sharing"),s.remoteUpdate().then((function(){a&&a.removeClass(n.working)}),(function(l){s.setValue("safetyLevel",o),t.safetyLevelDd.select(o),r.replaceClass("ui-icon-tiny-safety-"+e,"ui-icon-tiny-safety-"+o),a&&(a.removeClass(n.working),a.addClass(n.apiError)),t.onError(t.intlMessage({intlName:"photo-page-scrappy.SAFETY_CHANGE_ERROR"})),i.error({err:l})}))},changingToStricterPrivacy:function(t){var i=this.get("privacy"),n=e.PrivacyHelper.mapPrivacy(i.toJSON());return t!==n&&("private"===t||"public"===n||"family"===t&&"friends"===n||"friends"===t&&"family"===n||"friends"===t&&"friendsandfamily"===n||"family"===t&&"friendsandfamily"===n)},setPrivacy:function(t){var i=this.get("privacy"),n=!1,s=this;!s.stricterPrivacyChangeWarningDialog&&s.changingToStricterPrivacy(t)?(n=!0,s.stricterPrivacyChangeWarningDialog=new e.Views.FluidModal({appContext:s.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showCancelButton:!0,title:s.intlMessage({intlName:"photo-page-scrappy.STRICTER_PRIVACY_CHANGE_DIALOG_TITLE"}),actionButtonLabel:s.intlMessage({intlName:"common.OK"}),cancelButtonLabel:s.intlMessage({intlName:"common.CANCEL"}),message:s.intlMessage({intlName:"photo-page-scrappy.STRICTER_PRIVACY_CHANGE_DIALOG_MESSAGE"})}),s.stricterPrivacyChangeWarningDialog.on("actionClick",(function(e){s.changePrivacy(t,n)})),s.stricterPrivacyChangeWarningDialog.on("cancelClick",(function(t){s.stricterPrivacyChangeWarningDialog=void 0,s.privacyDd.select(e.PrivacyHelper.mapPrivacy(i.toJSON()))})),s.stricterPrivacyChangeWarningDialog.show()):s.changePrivacy(t,n)},changePrivacy:function(t,s){var o=this.get("privacy"),a=this.get("container").one(".c-charm-item-privacy"),r=e.PrivacyHelper.mapPrivacy(t),l=(e.PrivacyHelper.mapPrivacy(o.toJSON()),this.get("container").one(".c-charm-item-privacy i")),c=this;l.replaceClass(l.getDOMNode().className,"ui-icon-tiny-privacy"+t.toLowerCase()),a&&(a.removeClass(n.apiError),a.addClass(n.working)),Object.keys(r).forEach((function(e){o.setValue(e,r[e])})),o.remoteUpdate().then((function(){a&&(a.removeClass(n.working),a.removeClass(n.apiError)),s?e.config.win.location.reload():c.appContext.getModelRegistry("photostream-models").then((function(e){e.removeAll()}))}),(function(t){Object.keys(r).forEach((function(e){o.revertValue(e)})),a&&(a.removeClass(n.working),a.addClass(n.apiError),e.config.win.setTimeout((function(){a&&a.addClass(n.apiError)}),100)),e.PrivacyHelper.mapPrivacy(o.toJSON()),c.onError(c.intlMessage({intlName:"photo-page-scrappy.PRIVACY_CHANGE_ERROR"})),i.error({err:t})}))},setCommentingPermission:function(e){var t=this,s=this.get("privacy"),o=s.getValue("permComment"),a=this.get("container").one(".commenting-permission"),r=this.get("container").one(".ui-icon-tiny-commentPermission"+o);s.setValue("permComment",e),r.replaceClass("ui-icon-tiny-commentPermission"+o,"ui-icon-tiny-commentPermission"+e),a&&(a.addClass(n.working),a.removeClass(n.apiError)),s.remoteUpdate().then((function(){a&&a.removeClass(n.working)}),(function(l){s.setValue("permComment",o),t.commentingPermissionDd.select(o),r.replaceClass("ui-icon-tiny-commentPermission"+e,"ui-icon-tiny-commentPermission"+o),a&&(a.removeClass(n.working),a.addClass(n.apiError)),t.onError(t.intlMessage({intlName:"photo-page-scrappy.COMMENT_PERMS_UPDATE_ERROR"})),i.error({err:l})}))},setAddMetaPermission:function(e){var t=this,s=this.get("privacy"),o=s.getValue("permAddMeta"),a=this.get("container").one(".add-meta-permission"),r=this.get("container").one(".ui-icon-tiny-metaPermission"+o);s.setValue("permAddMeta",e),r.replaceClass("ui-icon-tiny-metaPermission"+o,"ui-icon-tiny-metaPermission"+e),a&&(a.addClass(n.working),a.removeClass(n.apiError)),s.remoteUpdate().then((function(){a&&a.removeClass(n.working)}),(function(l){s.setValue("permAddMeta",o),t.addMetaPermissionDd.select(o),r.replaceClass("ui-icon-tiny-metaPermission"+e,"ui-icon-tiny-metaPermission"+o),a&&(a.removeClass(n.working),a.addClass(n.apiError)),t.onError(t.intlMessage({intlName:"photo-page-scrappy.META_PERMS_UPDATE_ERROR"})),i.error({err:l})}))},setPrintPermission:function(e){var t=this,s=this.get("privacy"),o=s.getValue("permPrint"),a=this.get("container").one(".print-permission"),r=this.get("container").one(".ui-icon-tiny-printPermission"+o);s.setValue("permPrint",e),r.replaceClass("ui-icon-tiny-printPermission"+o,"ui-icon-tiny-printPermission"+e),a&&(a.addClass(n.working),a.removeClass(n.apiError),a.removeClass(n.ready)),s.remoteUpdate().then((function(){a&&(a.removeClass(n.working),a.addClass(n.ready))}),(function(l){s.setValue("permPrint",o),t.printPermissionDd.select(o),r.replaceClass("ui-icon-tiny-printPermission"+e,"ui-icon-tiny-printPermission"+o),a&&(a.removeClass(n.working),a.removeClass(n.ready),a.addClass(n.apiError)),t.onError(t.intlMessage({intlName:"photo-page-scrappy.META_PERMS_UPDATE_ERROR"})),i.error({err:l})}))},setContentType:function(e){var t=this,s=this.get("photo"),o=s.getValue("contentType"),a=this.get("container").one(".content-type");s.setValue("contentType",e),a&&(a.addClass(n.working),a.removeClass(n.apiError)),s.remoteUpdate().then((function(){a&&a.removeClass(n.working)}),(function(e){s.setValue("contentType",o),t.contentTypeDd.select(o),a&&(a.removeClass(n.working),a.addClass(n.apiError)),t.onError(t.intlMessage({intlName:"common.ERROR"})),i.error({err:e})}))},handleFlagPhotoClick:function(t){t.preventDefault();this.get("photo").getValue("safetyLevel"),this.get("personPreferences").getValue("safeSearch");var i,n=e.url(this.get("photo").getValue("url"));i=new e.Views.FlagModal({appContext:this.appContext,contentUrl:n,flagPhotoContainer:this.get("container").one(".flag-photo")}),new e.Views.FluidModal({appContext:this.appContext,subview:i,dismissOnOverlayClick:!0,showHeader:!1,showFooter:!1,showButtons:!1,showCancelButton:!1,showActionButton:!1,showCancelX:!1,contentPadding:0}).show()},handleModerationTooltipClick:function(t){var i=this,n=i.get("container").one(".moderation-tooltip");new e.Views.FluidDroparound({appContext:i.appContext,htmlMessage:i.intlHTMLMessage({intlName:"photo-page-scrappy.AUTO_MODERATION_MESSAGE",learnUrl:"https://flickrhelp.com/hc/en-us/articles/4404064374164-Set-the-Safety-Levels-of-Your-Flickr-Content-or-Account"}),showDropArrow:!0,dismissOnOverlayClick:!0,anchorElement:n,keyboardAnchorElement:n}).show()},handleFlagPhotoConfirmClick:function(e){var t=this;t.appContext.callAPI("flickr.moderation.flagPhoto",{photo_id:this.photoId,offensive:1}).then((function(e){t.get("container").one(".flag-photo").replace(t.intlMessage({intlName:"more-menu-view.PHOTO_HAS_BEEN_FLAGGED"}))}),(function(e){t.onError(t.intlMessage({intlName:"more-menu-view.PROBLEM_FLAGGING"}))}))},showLicenseHistoryModal:function(){new e.Views.FluidModal({showHeader:!0,appContext:this.appContext,dismissOnOverlayClick:!0,showActionButton:!0,showCancelButton:!1,actionButtonLabel:this.intlMessage({intlName:"common.CLOSE"}),title:this.intlMessage({intlName:"photo-page-scrappy.SHOW_LICENSE_HISTORY_CTA"}),extra:this.intlMessage({intlName:"photo-page-scrappy.LICENSE_HISTORY_DATE",firstLicenseDate:new Date("Tue Jul 17 2008 12:00:00 GMT-0800 (Pacific Standard Time)")}),width:560,height:400,showBodyLines:!0,showButtons:!0,showFooter:!0,showCancelX:!0,classList:"license-history",subview:new e.Views["license-history-view"]({photoId:this.photoId})}).show().on("activated",(function(){e.fire("licenseHistoryModal:activate")}))},handlePrivacyClick:function(){var t=this,i=t.privacyPermissionsMenuItems,n=t.get("privacy").toJSON();i.forEach((function(t){t.value===e.PrivacyHelper.mapPrivacy(n)?t.isSelected=!0:t.isSelected=!1}));var s=new e.Views.FluidDroparound({appContext:this.appContext,preferBottom:!0,popBeforePushOther:!0,classList:"sub-photo-additional-info-droparound",anchorElement:this.get("container").one(".privacy-permissions-button").one(".arrow"),menuItems:i});s.show(),this.registerEventHandler(s.on("selected",(function(e){e&&e.menuItem&&(t.get("container").one(".privacy-text").set("text",e.menuItem.text),t.setPrivacy(e.menuItem.value)),s.close()})),this)},handleCommentingPermissionsClick:function(){var t=this,i=this.commentingPermissionsMenuItems;i.forEach((function(e){e.value===t.get("privacy").getValue("permComment")?e.isSelected=!0:e.isSelected=!1}));var n=new e.Views.FluidDroparound({appContext:this.appContext,preferBottom:!0,popBeforePushOther:!0,classList:"sub-photo-additional-info-droparound",anchorElement:this.get("container").one(".commenting-button").one(".arrow"),menuItems:i});n.show(),this.registerEventHandler(n.on("selected",(function(e){e&&e.menuItem&&(t.get("container").one(".commenting-permission-text").set("text",e.menuItem.text),t.setCommentingPermission(e.menuItem.value)),n.close()})),this)},handleMetadataPermissionsClick:function(){var t=this,i=this.metaPermissionsMenuItems;i.forEach((function(e){e.value===t.get("privacy").getValue("permAddMeta")?e.isSelected=!0:e.isSelected=!1}));var n=new e.Views.FluidDroparound({appContext:this.appContext,preferBottom:!0,popBeforePushOther:!0,classList:"sub-photo-additional-info-droparound",anchorElement:this.get("container").one(".meta-permissions-button").one(".arrow"),menuItems:i});n.show(),this.registerEventHandler(n.on("selected",(function(e){e&&e.menuItem&&(t.get("container").one(".meta-permissions-text").set("text",e.menuItem.text),t.setAddMetaPermission(e.menuItem.value)),n.close()})),this)},handleSafetyLevelClick:function(){var t=this,i=this.safetyLevelMenuItems;this.get("photo").getValue("isVideo")&&(i=i.filter((function(e){return 2!==e.value}))),i.forEach((function(e){e.value===t.get("photo").getValue("safetyLevel")?e.isSelected=!0:e.isSelected=!1}));var n=new e.Views.FluidDroparound({appContext:this.appContext,preferBottom:!0,popBeforePushOther:!0,classList:"sub-photo-additional-info-droparound",anchorElement:this.get("container").one(".safety-level-button").one(".arrow"),menuItems:i});n.show(),this.registerEventHandler(n.on("selected",(function(e){e&&e.menuItem&&(t.get("container").one(".safety-level-text").set("text",e.menuItem.text),t.setSafetyLevel(e.menuItem.value)),n.close()})),this)},handleContentTypeClick:function(){var t,i=this;(t=this.get("photo").getValue("isVideo")?this.videoContentTypeMenuItems:this.photoContentTypeMenuItems).forEach((function(e){e.value===i.get("photo").getValue("contentType")?e.isSelected=!0:e.isSelected=!1}));var n=new e.Views.FluidDroparound({appContext:this.appContext,preferBottom:!0,popBeforePushOther:!0,classList:"sub-photo-additional-info-droparound",anchorElement:this.get("container").one(".content-type-button").one(".arrow"),menuItems:t});n.show(),this.registerEventHandler(n.on("selected",(function(e){e&&e.menuItem&&(i.get("container").one(".content-type-text").set("text",e.menuItem.text),i.setContentType(e.menuItem.value)),n.close()})),this)},handlePrintPermissionsClick:function(){var t=this,i=t.printPermissionMenuItems,n=t.get("privacy").toJSON();i.forEach((function(e){e.value===n.permPrint?e.isSelected=!0:e.isSelected=!1}));var s=new e.Views.FluidDroparound({appContext:this.appContext,preferBottom:!0,popBeforePushOther:!0,classList:"sub-photo-additional-info-droparound",anchorElement:this.get("container").one(".print-permissions-button").one(".arrow"),menuItems:i});s.show(),this.registerEventHandler(s.on("selected",(function(e){e&&e.menuItem&&(t.get("container").one(".print-permissions-text").set("text",e.menuItem.text),t.setPrintPermission(e.menuItem.value)),s.close()})),this)}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","fluid-modal-view","flag-modal-view","hermes-template-sub-photo-additional-info","privacy-helper","hermes-template-flag-photo-dialog-content","url","license-history-view"],optionalRequires:["hermes-core"],optional:[],langBundles:["common","photo-page-scrappy","settings"]});YUI.add("hermes-template-getty-photopage",(function(l,n){var e=l.Template.Handlebars.revive({1:function(l,n,e,t,a){var o,i,s=null!=n?n:l.nullContext||{},c=l.hooks.helperMissing,r=l.escapeExpression,u="function",p=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'<div class="main getty-photopage-div">\n\t<div class="sponsor-title-container">\n\t\t<p class="sponsor-title">'+r((p(e,"intlHTMLMessage")||n&&p(n,"intlHTMLMessage")||c).call(s,{name:"intlHTMLMessage",hash:{iStockLogo:null!=n?p(n,"iStockLogo"):n,assetRoot:null!=n?p(n,"assetRoot"):n,intlName:"common.SPONSORED_BY_ISTOCK"},data:a,loc:{start:{line:4,column:27},end:{line:4,column:126}}}))+'</p>\n\t\t<p class="sponsor-discount-code"><a href="'+r(typeof(i=null!=(i=p(e,"gettyPromoLink")||(null!=n?p(n,"gettyPromoLink"):n))?i:c)===u?i.call(s,{name:"gettyPromoLink",hash:{},data:a,loc:{start:{line:5,column:44},end:{line:5,column:62}}}):i)+'" target="_blank">'+r((p(e,"intlHTMLMessage")||n&&p(n,"intlHTMLMessage")||c).call(s,{name:"intlHTMLMessage",hash:{intlName:"common.GETTY_FLICKR_10_FREE"},data:a,loc:{start:{line:5,column:80},end:{line:5,column:138}}}))+'</a></p>\n\t</div>\n\t<div class="getty-search-main-container" style="height: '+r(l.lambda(null!=(o=null!=n?p(n,"layout"):n)?p(o,"containerHeight"):o,n))+'px;">\n'+(null!=(o=p(e,"each").call(s,null!=(o=null!=n?p(n,"layout"):n)?p(o,"boxes"):o,{name:"each",hash:{},fn:l.program(2,a,0),inverse:l.noop,data:a,loc:{start:{line:8,column:2},end:{line:11,column:11}}}))?o:"")+'\t</div>\n\t<div class="upgrade-pro-container">\n\t\t<p class="upgrade-to-pro-cta"><a href="'+r(typeof(i=null!=(i=p(e,"upgradeProLink")||(null!=n?p(n,"upgradeProLink"):n))?i:c)===u?i.call(s,{name:"upgradeProLink",hash:{},data:a,loc:{start:{line:14,column:41},end:{line:14,column:59}}}):i)+'">'+r((p(e,"intlMessage")||n&&p(n,"intlMessage")||c).call(s,{name:"intlMessage",hash:{intlName:"common.UPGRADE_PRO_HIDE_ADS"},data:a,loc:{start:{line:14,column:61},end:{line:14,column:115}}}))+"</a></p>\n\t</div>\n</div>\n"},2:function(l,n,e,t,a){var o,i=null!=n?n:l.nullContext||{},s=l.hooks.helperMissing,c="function",r=l.escapeExpression,u=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t<a href="'+r(typeof(o=null!=(o=u(e,"url")||(null!=n?u(n,"url"):n))?o:s)===c?o.call(i,{name:"url",hash:{},data:a,loc:{start:{line:9,column:12},end:{line:9,column:19}}}):o)+'" target="_blank" data-g-id="'+r(typeof(o=null!=(o=u(e,"id")||(null!=n?u(n,"id"):n))?o:s)===c?o.call(i,{name:"id",hash:{},data:a,loc:{start:{line:9,column:48},end:{line:9,column:54}}}):o)+'" data-g-index="'+r(typeof(o=null!=(o=u(e,"index")||a&&u(a,"index"))?o:s)===c?o.call(i,{name:"index",hash:{},data:a,loc:{start:{line:9,column:70},end:{line:9,column:80}}}):o)+'" class="getty-search-result" style="position: absolute; display:block; background-image: url(\''+r(typeof(o=null!=(o=u(e,"displayUri")||(null!=n?u(n,"displayUri"):n))?o:s)===c?o.call(i,{name:"displayUri",hash:{},data:a,loc:{start:{line:9,column:175},end:{line:9,column:189}}}):o)+"');background-size: cover; height:"+r(typeof(o=null!=(o=u(e,"height")||(null!=n?u(n,"height"):n))?o:s)===c?o.call(i,{name:"height",hash:{},data:a,loc:{start:{line:9,column:223},end:{line:9,column:233}}}):o)+"px; width:"+r(typeof(o=null!=(o=u(e,"width")||(null!=n?u(n,"width"):n))?o:s)===c?o.call(i,{name:"width",hash:{},data:a,loc:{start:{line:9,column:243},end:{line:9,column:252}}}):o)+"px; top: "+r(typeof(o=null!=(o=u(e,"top")||(null!=n?u(n,"top"):n))?o:s)===c?o.call(i,{name:"top",hash:{},data:a,loc:{start:{line:9,column:261},end:{line:9,column:268}}}):o)+"px; left: "+r(typeof(o=null!=(o=u(e,"left")||(null!=n?u(n,"left"):n))?o:s)===c?o.call(i,{name:"left",hash:{},data:a,loc:{start:{line:9,column:278},end:{line:9,column:286}}}):o)+'px;" title="'+r(typeof(o=null!=(o=u(e,"caption")||(null!=n?u(n,"caption"):n))?o:s)===c?o.call(i,{name:"caption",hash:{},data:a,loc:{start:{line:9,column:298},end:{line:9,column:309}}}):o)+'">\n\t\t\t</a>\n'},compiler:[8,">= 4.3.0"],main:function(l,n,e,t,a){var o,i=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(o=i(e,"unless").call(null!=n?n:l.nullContext||{},null!=n?i(n,"dontShowWidget"):n,{name:"unless",hash:{},fn:l.program(1,a,0),inverse:l.noop,data:a,loc:{start:{line:1,column:0},end:{line:17,column:11}}}))?o:""},useData:!0}),t={};l.Array.each([],(function(n){var e=l.Template.get("hermes/"+n);e&&(t[n]=e)})),l.Template.register("hermes/getty-photopage",(function(n,a){return(a=a||{}).partials=a.partials?l.merge(t,a.partials):t,e(n,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("getty-photopage-view",(function(t,e){var i=new t.SubscriptionsHelper,o=require("justified-layout"),a=require("hermes-core/flog")(e);t.namespace("Views")["getty-photopage-view"]=t.Base.create("getty-photopage-view",t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.justifiedLayout=o,this.params=e,this.gettyHelper=new t.GettyHelper(this.appContext,this.params),this.iStockLogoLocation=t.config.flickr.urls.assetRoot+"/images/getty/IStock_corporate_logo.svg",this.searchTerm="adventure",this.utmTrackingOptions={campaign:"adp_photos_sponsored",term:this.searchTerm,pageUrl:YUI.Env.isServer?this.appContext.request.url:t.url()+this.appContext.flapp.getPath()},this.gettyPlansLandingUrl="https://www.istockphoto.com/plans-and-pricing",this.dontShowWidget=this.appContext.getViewer().signedIn},loadState:function(){var e=this;let i=this.params.geo&&this.params.geo.countryCode?this.params.geo.countryCode:t.config.flickr.geo.countryCode;return new t.FlickrPromise({gettyModel:e.appContext.getModel("getty-search-models",{photoId:e.params.photoId,language:e.gettyHelper.getCorrectLangFormat(),countryCode:i})}).then((t=>{this.gettyModel=t.gettyModel,this.apiFailed=!1,this.searchTerm=this.gettyModel.getValue("searchPhrase"),this.utmTrackingOptions.term=this.searchTerm})).catch((i=>{e.apiFailed=!0,t.Snowplough&&t.Snowplough.sendStructuredEvent({category:e.searchTerm,action:"gettyResultsFail",label:"getty-photopage"}),a.error("Error with fetching getty-search-models",{err:i})}))},buildLayout:function(){var t,e=this;let i=this.gettyModel.getValue("images");if(i){var o=i.map((function(t){return Math.min(Number(parseFloat(t.maxDimensions.width/t.maxDimensions.height).toFixed(2)),2)})),a=0,r=0,n=0;return(t=e.justifiedLayout(o,{containerWidth:500,containerPadding:0,forceAspectRatio:1,boxSpacing:{horizontal:4,vertical:4},targetRowHeight:120,targetRowHeightTolerance:0})).boxes.some((function(e,i){r<e.top&&(r=e.top,++a>=2&&(n=n||i,t.containerHeight=t.containerHeight-e.height-4))})),n||(n=t.boxes.length),t.boxes=t.boxes.slice(0,n),t.boxes.forEach(((t,i)=>{var o=e.gettyModel.getValue("images")[i];t.displayUri=o.displayUri,t.url=this.gettyHelper.appendGettyTracking(o.referenceUri,e.utmTrackingOptions),t.caption=o.caption})),t}},buildContainer:function(){let t=this.apiFailed||YUI.Env.isServer?[]:this.buildLayout();return this.setContainerWithTemplate("getty-photopage",{dontShowWidget:this.apiFailed||this.dontShowWidget,layout:t,iStockLogo:this.iStockLogoLocation,gettyPromoLink:this.gettyHelper.appendGettyTracking(this.gettyPlansLandingUrl,this.utmTrackingOptions),upgradeProLink:i.getProLandingPageUrl(i.UTM_HIDE_ADS_GETTY_SEARCH)}),this},activate:function(){return this.buildContainer(),this.registerEventHandler(this.get("container").delegate("click",this.onGettyResultClick.bind(this),".getty-search-result")),this.apiFailed||this.dontShowWidget||t.Snowplough&&t.Snowplough.sendStructuredEvent({category:this.searchTerm,action:"gettyResultsLoad",label:"getty-photopage"}),this},onGettyResultClick:function(e){let i=e.currentTarget;if(t.Snowplough&&i){let e=i.getAttribute("data-g-id"),o=parseInt(i.getAttribute("data-g-index"),10)+1;t.Snowplough.sendStructuredEvent({category:this.searchTerm,action:"gettyResultClick",label:"getty-photopage",property:e,value:o})}}})}),"@VERSION@",{requires:["flickr-view","hermes-template-getty-photopage","getty-helper","getty-search-models"],optionalRequires:["hermes-core"],langBundles:["common"]});YUI.add("sub-photo-right-view",(function(e){e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){return this.nsid=e.nsid,this.photoId=e.photoId,this.backToURL=e.backToURL,this.isOwner=e.isOwner,this.showGettyWidget=!0,this.geo=e.geo,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},subviewConfig:{"photo-charm-exif-scrappy-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"sub-photo-right-stats-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"sub-photo-date-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"photo-license-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"sub-photo-submoola-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return this.isMobile||this.appContext.getViewer().isPro}},"sub-photo-tags-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,additionalViewClasses:[""]},"sub-photo-contexts-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"sub-photo-additional-info-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"getty-photopage-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,disabled:function(){return this.appContext.getViewer().signedIn||this.isMobile}}},loadState:function(){return new e.FlickrPromise({photo:this.appContext.getModel("photo-models",this.photoId)}).then((t=>{this.photoModel=t.photo;let i=this.geo||e.config.flickr.geo;(!this.appContext.adManager.canShowAd(t.photo)||this.isMobile||this.appContext.getViewer().signedIn||i.countryCode&&"VN"===i.countryCode)&&(this.showGettyWidget=!1)}))},buildContainer:function(){return this.setContainerWithTemplate("sub-photo-right",{showGettyWidget:this.showGettyWidget}),this},buildErrorContainer:function(){},activate:function(){var e=this;return this.photoModel&&this.registerEventHandler(this.photoModel.on("valuesChanged",(function(t){t.safetyLevel&&e.canShowGettyWidget()}))),this},canShowGettyWidget:function(){var e=this.showGettyWidget;!this.appContext.adManager.canShowAd(this.photoModel)||this.isMobile?this.showGettyWidget=!1:this.showGettyWidget=!0,e!==this.showGettyWidget&&this.buildContainer()}})}),"@VERSION@",{requires:["flickr-view","hermes-template-sub-photo-right","sub-photo-submoola-view","url-helper"],optional:["photo-charm-exif-scrappy-view","sub-photo-right-stats-view","sub-photo-contexts-view","photo-license-view","sub-photo-date-view","sub-photo-additional-info-view","getty-photopage-view"]});YUI.add("hermes-template-sub-photo-keyboard-shortcuts",(function(n,a){var e=n.Template.Handlebars.revive({1:function(n,a,e,l,t){var s,o=null!=a?a:n.nullContext||{},i=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return'\t\t\x3c!--Favorite Shortcut --\x3e\n\t\t<div class="key-container'+(null!=(s=r(e,"if").call(o,null!=a?r(a,"isOwner"):a,{name:"if",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:5,column:27},end:{line:5,column:58}}}))?s:"")+'" '+(null!=(s=r(e,"unless").call(o,null!=a?r(a,"isOwner"):a,{name:"unless",hash:{},fn:n.program(4,t,0),inverse:n.noop,data:t,loc:{start:{line:5,column:60},end:{line:5,column:102}}}))?s:"")+'>\n\t\t\t<span class="favorite-key key">F</span>\n\t\t\t<span class="favorite-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.FAVORITE"},data:t,loc:{start:{line:7,column:46},end:{line:7,column:88}}}))+'</span>\n\t\t</div>\n\n\t\t\x3c!--Comment Shortcut --\x3e\n\t\t<div class="key-container'+(null!=(s=r(e,"unless").call(o,null!=a?r(a,"canAddComment"):a,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:11,column:27},end:{line:11,column:72}}}))?s:"")+'" '+(null!=(s=r(e,"if").call(o,null!=a?r(a,"canAddComment"):a,{name:"if",hash:{},fn:n.program(4,t,0),inverse:n.noop,data:t,loc:{start:{line:11,column:74},end:{line:11,column:114}}}))?s:"")+'>\n\t\t\t<span class="comment-key key">C</span>\n\t\t\t<span class="comment-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.COMMENT"},data:t,loc:{start:{line:13,column:45},end:{line:13,column:98}}}))+"</span>\n\t\t</div>\n"},2:function(n,a,e,l,t){return" disabled"},4:function(n,a,e,l,t){return'tabindex="1"'},6:function(n,a,e,l,t){var s=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return'\t\t<div class="key-container" tabindex="1">\n\t\t\t<span class="search-key key">Z</span>\n\t\t\t<span class="search-key-label key-label">'+n.escapeExpression((s(e,"intlMessage")||a&&s(a,"intlMessage")||n.hooks.helperMissing).call(null!=a?a:n.nullContext||{},{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ZOOM"},data:t,loc:{start:{line:41,column:44},end:{line:41,column:94}}}))+"</span>\n\t\t</div>\n"},8:function(n,a,e,l,t){var s=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return'\t\x3c!--Lightbox Shortcut --\x3e\n\t\t<div class="key-container" tabindex="1">\n\t\t\t<span class="search-key key">L</span>\n\t\t\t<span class="search-key-label key-label">'+n.escapeExpression((s(e,"intlHTMLMessage")||a&&s(a,"intlHTMLMessage")||n.hooks.helperMissing).call(null!=a?a:n.nullContext||{},{name:"intlHTMLMessage",hash:{intlName:"photo-page-scrappy.VIEW_IN_LIGHTBOX"},data:t,loc:{start:{line:47,column:44},end:{line:47,column:110}}}))+"</span>\n\t\t</div>\n"},10:function(n,a,e,l,t){var s,o=null!=a?a:n.nullContext||{},i=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return"\n"+(null!=(s=r(e,"if").call(o,null!=a?r(a,"isOwner"):a,{name:"if",hash:{},fn:n.program(11,t,0),inverse:n.program(13,t,0),data:t,loc:{start:{line:59,column:2},end:{line:87,column:9}}}))?s:"")+'\n\t\t\x3c!--Tagging Shortcuts --\x3e\n\t\t<div class="key-container'+(null!=(s=r(e,"unless").call(o,null!=a?r(a,"canAddMeta"):a,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:90,column:27},end:{line:90,column:69}}}))?s:"")+'" '+(null!=(s=r(e,"if").call(o,null!=a?r(a,"canAddMeta"):a,{name:"if",hash:{},fn:n.program(4,t,0),inverse:n.noop,data:t,loc:{start:{line:90,column:71},end:{line:90,column:108}}}))?s:"")+'>\n\t\t\t<span class="add-tag-key key">T</span>\n\t\t\t<span class="add-tag-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_TAG"},data:t,loc:{start:{line:92,column:45},end:{line:92,column:98}}}))+'</span>\n\t\t</div>\n\n\t\t<div class="key-container'+(null!=(s=r(e,"unless").call(o,null!=a?r(a,"canAddMeta"):a,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:95,column:27},end:{line:95,column:69}}}))?s:"")+'" '+(null!=(s=r(e,"if").call(o,null!=a?r(a,"canAddMeta"):a,{name:"if",hash:{},fn:n.program(4,t,0),inverse:n.noop,data:t,loc:{start:{line:95,column:71},end:{line:95,column:108}}}))?s:"")+'>\n\t\t\t<span class="add-person-key key">P</span>\n\t\t\t<span class="add-person-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_PERSON"},data:t,loc:{start:{line:97,column:48},end:{line:97,column:104}}}))+"</span>\n\t\t</div>\n"},11:function(n,a,e,l,t){var s,o=null!=a?a:n.nullContext||{},i=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return'\n\t\t\t\x3c!--Add to Group Shortcut --\x3e\n\t\t\t<div class="key-container'+(null!=(s=r(e,"unless").call(o,null!=a?r(a,"canAddToGroup"):a,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:62,column:28},end:{line:62,column:73}}}))?s:"")+'" '+(null!=(s=r(e,"if").call(o,null!=a?r(a,"canAddToGroup"):a,{name:"if",hash:{},fn:n.program(4,t,0),inverse:n.noop,data:t,loc:{start:{line:62,column:75},end:{line:62,column:115}}}))?s:"")+'>\n\t\t\t\t<span class="add-to-group-key key">G</span>\n\t\t\t\t<span class="add-to-group-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_TO_GROUP"},data:t,loc:{start:{line:64,column:51},end:{line:64,column:109}}}))+'</span>\n\t\t\t</div>\n\n\t\t\t\x3c!--Add to album Shortcut --\x3e\n\t\t\t<div class="key-container'+(null!=(s=r(e,"unless").call(o,null!=a?r(a,"canAddToAlbum"):a,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:68,column:28},end:{line:68,column:73}}}))?s:"")+'" '+(null!=(s=r(e,"if").call(o,null!=a?r(a,"canAddToAlbum"):a,{name:"if",hash:{},fn:n.program(4,t,0),inverse:n.noop,data:t,loc:{start:{line:68,column:75},end:{line:68,column:115}}}))?s:"")+'>\n\t\t\t\t<span class="add-to-album-key key">A</span>\n\t\t\t\t<span class="add-to-album-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_TO_ALBUM"},data:t,loc:{start:{line:70,column:51},end:{line:70,column:109}}}))+"</span>\n\t\t\t</div>\n\n"},13:function(n,a,e,l,t){var s,o=null!=a?a:n.nullContext||{},i=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return'\n\t\t\t\x3c!--Invite to group Shortcut --\x3e\n\t\t\t<div class="key-container'+(null!=(s=r(e,"unless").call(o,null!=a?r(a,"canInviteToGroup"):a,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:76,column:28},end:{line:76,column:76}}}))?s:"")+'" '+(null!=(s=r(e,"if").call(o,null!=a?r(a,"canInviteToGroup"):a,{name:"if",hash:{},fn:n.program(4,t,0),inverse:n.noop,data:t,loc:{start:{line:76,column:78},end:{line:76,column:121}}}))?s:"")+'>\n\t\t\t\t<span class="add-to-group-key key">G</span>\n\t\t\t\t<span class="add-to-group-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.INVITE_TO_GROUP"},data:t,loc:{start:{line:78,column:51},end:{line:78,column:112}}}))+'</span>\n\t\t\t</div>\n\n\t\t\t\x3c!--Add to gallery Shortcut --\x3e\n\t\t\t<div class="key-container'+(null!=(s=r(e,"unless").call(o,null!=a?r(a,"canAddToGallery"):a,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:82,column:28},end:{line:82,column:75}}}))?s:"")+'" '+(null!=(s=r(e,"if").call(o,null!=a?r(a,"canAddToGallery"):a,{name:"if",hash:{},fn:n.program(4,t,0),inverse:n.noop,data:t,loc:{start:{line:82,column:77},end:{line:82,column:119}}}))?s:"")+'>\n\t\t\t\t<span class="add-to-album-key key">A</span>\n\t\t\t\t<span class="add-to-album-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_TO_GALLERY"},data:t,loc:{start:{line:84,column:51},end:{line:84,column:111}}}))+"</span>\n\t\t\t</div>\n\n"},compiler:[8,">= 4.3.0"],main:function(n,a,e,l,t){var s,o=null!=a?a:n.nullContext||{},i=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return'\n<div class="sub-photo-keyboard-shortcuts" tabindex="1" aria-label="'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.KEYBOARD_SHORTCUTS"},data:t,loc:{start:{line:2,column:67},end:{line:2,column:131}}}))+'">\n'+(null!=(s=r(e,"if").call(o,null!=a?r(a,"signedIn"):a,{name:"if",hash:{},fn:n.program(1,t,0),inverse:n.noop,data:t,loc:{start:{line:3,column:1},end:{line:15,column:8}}}))?s:"")+'\n\t\x3c!--Search Shortcut --\x3e\n\t<div class="key-container" tabindex="1">\n\t\t<span class="search-key key">S</span>\n\t\t<span class="search-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.SEARCH"},data:t,loc:{start:{line:20,column:43},end:{line:20,column:83}}}))+'</span>\n\t</div>\n\n\t\x3c!--Photo Navigation Shortcut --\x3e\n\t<div class="key-container" tabindex="1">\n\t\t<span class="photo-navigation-key-left key"><i class="photo-navigation-key-icon-left" aria-label="'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.LEFT_ARROW"},data:t,loc:{start:{line:25,column:100},end:{line:25,column:144}}}))+'"></i></span>\n\t\t<span class="photo-navigation-key-right key"><i class="photo-navigation-key-icon-right" aria-label="'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.RIGHT_ARROW"},data:t,loc:{start:{line:26,column:102},end:{line:26,column:147}}}))+'"></i></span>\n\t\t<span class="photo-navigation-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.PHOTO_NAVIGATION"},data:t,loc:{start:{line:27,column:53},end:{line:27,column:115}}}))+'</span>\n\t</div>\n\n\t\x3c!--Thumbnail Navigation Shortcut --\x3e\n\t<div class="key-container" tabindex="1">\n\t\t<span class="thumbnail-navigation-key-left key"> &lt; </span>\n\t\t<span class="thumbnail-navigation-key-right key"> &gt; </span>\n\t\t<span class="thumbnail-navigation-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.THUMBNAIL_NAVIGATION"},data:t,loc:{start:{line:34,column:57},end:{line:34,column:123}}}))+"</span>\n\t</div>\n\n\t\x3c!--Zoom Shortcut --\x3e\n"+(null!=(s=r(e,"if").call(o,null!=a?r(a,"enableZoom"):a,{name:"if",hash:{},fn:n.program(6,t,0),inverse:n.program(8,t,0),data:t,loc:{start:{line:38,column:1},end:{line:49,column:8}}}))?s:"")+'\n\t\x3c!--Back to Context Shortcut --\x3e\n\t<div class="key-container'+(null!=(s=r(e,"unless").call(o,null!=a?r(a,"canGoBackTo"):a,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:52,column:26},end:{line:52,column:69}}}))?s:"")+'" '+(null!=(s=r(e,"if").call(o,null!=a?r(a,"canGoBackTo"):a,{name:"if",hash:{},fn:n.program(4,t,0),inverse:n.noop,data:t,loc:{start:{line:52,column:71},end:{line:52,column:109}}}))?s:"")+'>\n\t\t<span class="back-to-context-key key">B</span>\n\t\t<span class="back-to-context-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.BACK_TO_CONTEXT"},data:t,loc:{start:{line:54,column:52},end:{line:54,column:113}}}))+"</span>\n\t</div>\n\n"+(null!=(s=r(e,"if").call(o,null!=a?r(a,"signedIn"):a,{name:"if",hash:{},fn:n.program(10,t,0),inverse:n.noop,data:t,loc:{start:{line:57,column:1},end:{line:99,column:8}}}))?s:"")+"</div>\n\n"},useData:!0}),l={};n.Array.each([],(function(a){var e=n.Template.get("hermes/"+a);e&&(l[a]=e)})),n.Template.register("hermes/sub-photo-keyboard-shortcuts",(function(a,t){return(t=t||{}).partials=t.partials?n.merge(l,t.partials):l,e(a,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});