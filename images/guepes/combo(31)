YUI.add("hermes-template-people-card",(function(e,t){var a=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,a,n,l){var s=null!=t?t:e.nullContext||{},i=e.hooks.helperMissing,r=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="people-card">\n\t<h1 class="title">\n\t\t'+r((o(a,"intlMessage")||t&&o(t,"intlMessage")||i).call(s,{name:"intlMessage",hash:{intlName:"feed.PEOPLE_TO_FOLLOW"},data:l,loc:{start:{line:3,column:2},end:{line:3,column:50}}}))+'\n\t</h1>\n\t<div class="people-list-container">\n\t\t<div class="people-list"></div>\n\t</div>\n\t<div class="view-more-footer">\n\t\t<span role="button" class="view-more-button">'+r((o(a,"intlMessage")||t&&o(t,"intlMessage")||i).call(s,{name:"intlMessage",hash:{intlName:"common.VIEW_MORE"},data:l,loc:{start:{line:9,column:47},end:{line:9,column:90}}}))+"</span>\n\t</div>\n</div>"},useData:!0}),n={};e.Array.each([],(function(t){var a=e.Template.get("hermes/"+t);a&&(n[t]=a)})),e.Template.register("hermes/people-card",(function(t,l){return(l=l||{}).partials=l.partials?e.merge(n,l.partials):n,a(t,l)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("people-card-view",(function(e,t){require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.Base.create("people-card-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.params=e,this.justifiedLayout=require("justified-layout")},loadState:function(){return e.Promise.resolve()},buildContainer:function(){this.setContainerWithTemplate("people-card",this.params)},activate:function(){var e=this,t=this.get("container");return this.peopleCardNode=t.one(".people-card"),this.peopleListNode=t.one(".people-list"),this.moreButton=t.one(".view-more-button"),this.registerEventHandler(this.moreButton.on("click",this.handleMoreClick.bind(this))),this.getSubviews().then((function(){return e.insertSubviews()})).then((function(){return e.buildLayout()}))},getSubviews:function(){return e.Promise.all([])},insertSubviews:function(){return e.Promise.all([])},buildLayout:function(){var t,i=this,n=[],o=e.Node.create('<div class="people-layout"></div>'),a=this.peopleListNode.get("clientWidth"),r=this.appContext.viewportData.getWidth()<=500?a/1.8:a/3.6;return t=i.justifiedLayout(this.params.personItems,{containerWidth:a,containerPadding:0,boxSpacing:{horizontal:20,vertical:0},targetRowHeight:r,targetRowHeightTolerance:.3,forceAspectRatio:1.8}),o.setStyle("height",t.containerHeight),this.params.personItems.forEach((function(e){n.push(i.appContext.getView("person-info-card-view",Object.assign({appContext:i.appContext},e)).then((function(e){return e.initialize()})).then((function(e){return o.appendChild(e.get("container")),e})))})),e.Promise.all(n).then((function(n){var a=[];return i.peopleListNode.appendChild(o),n.forEach((function(e,i){var n=t.boxes[i],o=e.get("container");o.setStyle("position","absolute"),o.setStyle("flex-direction","column"),o.setStyle("top",n.top),o.setStyle("left",n.left),o.setStyle("width",n.width),o.setStyle("height",n.height),a.push(e.activate())})),e.Promise.all(a)}))},handleMoreClick:function(){this.fire("batchLayoutMoreClicked",{layoutType:"batchPeople",itemId:this.params.item.id})},setAwake:function(e){this.isAwake=e,this.peopleCardNode.toggleClass("awake",e)}})}),"@VERSION@",{requires:["flickr-view","person-info-card-view","hermes-template-people-card"],optionalRequires:["hermes-core"],langBundles:["common","feed"]});YUI.add("hermes-template-stats-rail-card",(function(t,n){var l=t.Template.Handlebars.revive({1:function(t,n,l,a,e){var s,i=null!=n?n:t.nullContext||{},r=t.hooks.helperMissing,o="function",c=t.escapeExpression,d=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t<div class="stats-rail-card pro">\n\t\t<h2 class="title">\n\t\t\t<div role="button" class="stats-filter-menu-button">\n\t\t\t\t<span class="filter-menu-text">'+c(typeof(s=null!=(s=d(l,"filterName")||(null!=n?d(n,"filterName"):n))?s:r)===o?s.call(i,{name:"filterName",hash:{},data:e,loc:{start:{line:5,column:35},end:{line:5,column:49}}}):s)+'</span>\n\t\t\t\t<span class="arrow">\n\t\t\t\t\t<svg class="icon icon-dropdown_arrow"><use xlink:href="#icon-dropdown_arrow"></use></svg>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</h2>\n\t\t<div class="content-container hidden invisible">\n\t\t\t<div class="details-container">\n\t\t\t\t<div class="count-container">\n\t\t\t\t\t<a href="'+c(typeof(s=null!=(s=d(l,"statsUrl")||(null!=n?d(n,"statsUrl"):n))?s:r)===o?s.call(i,{name:"statsUrl",hash:{},data:e,loc:{start:{line:14,column:14},end:{line:14,column:26}}}):s)+'" class="count-text">'+c(typeof(s=null!=(s=d(l,"viewCount")||(null!=n?d(n,"viewCount"):n))?s:r)===o?s.call(i,{name:"viewCount",hash:{},data:e,loc:{start:{line:14,column:47},end:{line:14,column:60}}}):s)+'</a>\n\t\t\t\t</div>\n\t\t\t\t<a href="'+c(typeof(s=null!=(s=d(l,"statsUrl")||(null!=n?d(n,"statsUrl"):n))?s:r)===o?s.call(i,{name:"statsUrl",hash:{},data:e,loc:{start:{line:16,column:13},end:{line:16,column:25}}}):s)+'"  class="graph-container">\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div class="list-container">\n\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="dummy-loader">\n\t\t\t<div class="details">\n\t\t\t\t<div class="left-container">\n\t\t\t\t\t<div class="box" style="width: 70px; height: 50px;"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="right-container">\n\t\t\t\t\t<div class="box" style="width: 120px; height: 52px;"></div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t\t<div class="row">\n\t\t\t\t<div class="box" style="width: 24%"></div>\n\t\t\t\t<div class="box" style="width: 24%"></div>\n\t\t\t\t<div class="box" style="width: 24%"></div>\n\t\t\t\t<div class="box" style="width: 24%"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n'},3:function(t,n,l,a,e){var s,i=null!=n?n:t.nullContext||{},r=t.hooks.helperMissing,o="function",c=t.escapeExpression,d=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t<div class="stats-rail-card free">\n\t\t<h2 class="title">\n\t\t\t<a href="'+c(typeof(s=null!=(s=d(l,"statsUrl")||(null!=n?d(n,"statsUrl"):n))?s:r)===o?s.call(i,{name:"statsUrl",hash:{},data:e,loc:{start:{line:45,column:12},end:{line:45,column:24}}}):s)+'">'+c(typeof(s=null!=(s=d(l,"title")||(null!=n?d(n,"title"):n))?s:r)===o?s.call(i,{name:"title",hash:{},data:e,loc:{start:{line:45,column:26},end:{line:45,column:35}}}):s)+'</a>\n\t\t</h2>\n\t\t<div class="content-container hidden invisible">\n\t\t\t<div class="details-container">\n\t\t\t\t<div class="graph-container">\n\t\t\t\t</div>\n\t\t\t\t<div class="count-container">\n\t\t\t\t\t<span class="count-text">'+c(typeof(s=null!=(s=d(l,"viewCount")||(null!=n?d(n,"viewCount"):n))?s:r)===o?s.call(i,{name:"viewCount",hash:{},data:e,loc:{start:{line:52,column:30},end:{line:52,column:43}}}):s)+'</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="button-container">\n\t\t\t\t<a href="'+c(typeof(s=null!=(s=d(l,"upgradeUrl")||(null!=n?d(n,"upgradeUrl"):n))?s:r)===o?s.call(i,{name:"upgradeUrl",hash:{},data:e,loc:{start:{line:56,column:13},end:{line:56,column:27}}}):s)+'" class="butt flex hollow large">'+c((d(l,"preventOrphans")||n&&d(n,"preventOrphans")||r).call(i,(d(l,"intlMessage")||n&&d(n,"intlMessage")||r).call(i,{name:"intlMessage",hash:{intlName:"feed.GET_STATS_WITH_PRO"},data:e,loc:{start:{line:56,column:77},end:{line:56,column:125}}}),{name:"preventOrphans",hash:{},data:e,loc:{start:{line:56,column:60},end:{line:56,column:127}}}))+'</a>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="dummy-loader">\n\t\t\t<div class="details">\n\t\t\t\t<div class="left-container">\n\t\t\t\t\t<div class="box" style="width: 60px; height: 48px;"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="right-container">\n\t\t\t\t\t<div class="box" style="width: 80px; height: 48px;"></div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t\t<div class="button-container">\n\t\t\t\t<div class="box" style="width: 100%; height: 48px"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n'},compiler:[8,">= 4.3.0"],main:function(t,n,l,a,e){var s,i=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return null!=(s=i(l,"if").call(null!=n?n:t.nullContext||{},null!=n?i(n,"isPro"):n,{name:"if",hash:{},fn:t.program(1,e,0),inverse:t.program(3,e,0),data:e,loc:{start:{line:1,column:0},end:{line:75,column:7}}}))?s:""},useData:!0}),a={};t.Array.each([],(function(n){var l=t.Template.get("hermes/"+n);l&&(a[n]=l)})),t.Template.register("hermes/stats-rail-card",(function(n,e){return(e=e||{}).partials=e.partials?t.merge(a,e.partials):a,l(n,e)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-stats-photo-card",(function(n,t){var e=n.Template.Handlebars.revive({1:function(n,t,e,l,a){return'\t\t\t\t\t<svg class="icon icon-fave"><use xlink:href="#icon-fave"></use></svg>\n'},3:function(n,t,e,l,a){return'\t\t\t\t\t<svg class="icon icon-comment"><use xlink:href="#icon-comment"></use></svg>\n'},5:function(n,t,e,l,a){return'\t\t\t\t\t<svg class="icon icon-view"><use xlink:href="#icon-view"></use></svg>\n'},compiler:[8,">= 4.3.0"],main:function(n,t,e,l,a){var o,s,i=null!=t?t:n.nullContext||{},r=n.hooks.helperMissing,c="function",u=n.escapeExpression,m=n.lambda,h=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'<div class="stats-photo-card" style="width: '+u(typeof(s=null!=(s=h(e,"width")||(null!=t?h(t,"width"):t))?s:r)===c?s.call(i,{name:"width",hash:{},data:a,loc:{start:{line:1,column:44},end:{line:1,column:53}}}):s)+"px; height: "+u(typeof(s=null!=(s=h(e,"height")||(null!=t?h(t,"height"):t))?s:r)===c?s.call(i,{name:"height",hash:{},data:a,loc:{start:{line:1,column:65},end:{line:1,column:75}}}):s)+'px;">\n\t<a class="stats-photo photo-link" href="'+u(m(null!=(o=null!=t?h(t,"photo"):t)?h(o,"url"):o,t))+'"\n\t\tstyle="background-image: url(\''+u(m(null!=(o=null!=t?h(t,"photo"):t)?h(o,"displayUrl"):o,t))+'\');">\n\n\t\t<div class="stats-photo-overlay">\n\t\t\t<span class="engagement">\n'+(null!=(o=(h(e,"ifCond")||t&&h(t,"ifCond")||r).call(i,null!=t?h(t,"engagementType"):t,"===","faves",{name:"ifCond",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:7,column:4},end:{line:9,column:15}}}))?o:"")+(null!=(o=(h(e,"ifCond")||t&&h(t,"ifCond")||r).call(i,null!=t?h(t,"engagementType"):t,"===","comments",{name:"ifCond",hash:{},fn:n.program(3,a,0),inverse:n.noop,data:a,loc:{start:{line:10,column:4},end:{line:12,column:15}}}))?o:"")+(null!=(o=(h(e,"ifCond")||t&&h(t,"ifCond")||r).call(i,null!=t?h(t,"engagementType"):t,"===","views",{name:"ifCond",hash:{},fn:n.program(5,a,0),inverse:n.noop,data:a,loc:{start:{line:13,column:4},end:{line:15,column:15}}}))?o:"")+'\t\t\t\t<span class="engagement-count">'+u((h(e,"formatNumber")||t&&h(t,"formatNumber")||r).call(i,null!=(o=null!=t?h(t,"photo"):t)?h(o,"dayCount"):o,{name:"formatNumber",hash:{},data:a,loc:{start:{line:16,column:35},end:{line:16,column:66}}}))+"</span>\n\t\t\t</span>\n\t\t</div>\n\t</a>\n</div>\n"},useData:!0}),l={};n.Array.each([],(function(t){var e=n.Template.get("hermes/"+t);e&&(l[t]=e)})),n.Template.register("hermes/stats-photo-card",(function(t,a){return(a=a||{}).partials=a.partials?n.merge(l,a.partials):l,e(t,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("stats-photo-daily-models",(function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{},attributes:{photo:{isModel:!0},viewCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return(t=e.AttributeHelpers.coerceInteger(t))<0&&(t=0),t},defaultValue:0},totalViewCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return(t=e.AttributeHelpers.coerceInteger(t))<0&&(t=0),t},defaultValue:0},faveCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return(t=e.AttributeHelpers.coerceInteger(t))<0&&(t=0),t},defaultValue:0},totalFaveCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return(t=e.AttributeHelpers.coerceInteger(t))<0&&(t=0),t},defaultValue:0},commentCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return(t=e.AttributeHelpers.coerceInteger(t))<0&&(t=0),t},defaultValue:0},totalCommentCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return(t=e.AttributeHelpers.coerceInteger(t))<0&&(t=0),t},defaultValue:0}}})}),"@VERSION@",{requires:["flickr-model-registry","flickr-promise"]});YUI.add("stats-popular-photos-models",(function(t){function e(t){e.superclass.constructor.call(this,t)}t.Models[this.name]=e,t.extend(e,t.FlickrModelRegistry,{name:this.name,remote:{read:function(e){return t.ListFetchers["flickr-stats-popular-photos"].run(e,this.appContext)}},attributes:{photos:{isCollection:!0,pageFetch:{listFetcher:t.ListFetchers["flickr-stats-popular-photos"]}},stats:{},totalItems:{validator:function(e,r){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)},defaultValue:0},missingData:{defaultValue:!1}}})}),"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-stats-popular-photos-fetcher"]});YUI.add("flickr-stats-popular-photos-fetcher",(function(t,o){"use strict";var e=require("hermes-core/flog")(o);t.namespace("ListFetchers")["flickr-stats-popular-photos"]={run:function(s,r,a){var i=this;return new t.FlickrPromise({apiResponse:r.callAPI("flickr.stats.getPopularPhotos",this._processParams(s)),modelRegistry:r.getModelRegistry("stats-popular-photos-models"),personModelRegistry:r.getModelRegistry("person-models"),photoModelRegistry:r.getModelRegistry("photo-models"),photoEngagementModelRegistry:r.getModelRegistry("photo-engagement-models"),photoStatsModelRegistry:r.getModelRegistry("photo-stats-models"),statsPhotoDailyRegistry:r.getModelRegistry("stats-photo-daily-models")}).then((function(t){return i._processResponse(t,s)}),(function(t){if(2===t.code)return e.error({err:t,id:s.id,date:s.sort}),r.getModelRegistry("stats-popular-photos-models").then((function(t){t.addOrUpdate({id:s.id,photos:[],missingData:!0})}));if(5!==t.code||a){if(5===t.code)return e.error({err:t,id:s.id,sort:s.sort}),r.getModelRegistry("stats-popular-photos-models").then((function(t){t.addOrUpdate({id:s.id,photos:[],missingData:!0})}));throw t}return e.error({err:t,id:s.id,sort:s.sort}),s.sort=null,i.run(s,r,!0)})).catch(t.FetcherErrorLogger(o))},_processResponse:function(o,e){var s,r=o.apiResponse,a=o.modelRegistry,i=o.personModelRegistry,p=o.photoModelRegistry,l=o.photoEngagementModelRegistry,d=o.photoStatsModelRegistry,n=o.statsPhotoDailyRegistry,g=[],h=0;return s={id:e.id,totalItems:r&&r.photos?r.photos.total:0},r.photos.photo.length&&(g=t.Array.map(r.photos.photo,(function(o,s){var r,a;if(null!==o.id)return a={id:(r=t.APIHelper.response.parsePhotos({photos:[o],personModelRegistry:i,photoModelRegistry:p,photoEngagementModelRegistry:l,photoStatsModelRegistry:d})[0]).id+e.date,photo:r,viewCount:o.stats.views,totalViewCount:o.stats.totalViews,faveCount:o.stats.favorites,totalFaveCount:o.stats.totalFavorites,commentCount:o.stats.comments,totalCommentCount:o.stats.totalComments},n.addOrUpdate(a);h++})),h>0&&(g=g.filter((function(t){return t})))),s.photos={perPage:r.photos.perpage,page:r.photos.page,pageContent:g,totalItems:r&&r.photos?r.photos.total-h:0},a.addOrUpdate(s),g},_processParams:function(o){return{extras:t.APIHelper.request.getRebootPhotoExtras(),per_page:o.perPage||20,page:o.page||1,date:o.date||"",sort:o.sort||"views",include_results_with_zero_sorts:1,id:o.id}}}}),"@VERSION@",{requires:["flickr-promise","api-helper"],optionalRequires:["hermes-core"],optional:["stats-popular-photos-models","person-models","photo-models","photo-engagement-models","photo-stats-models","stats-photo-daily-models"]});YUI.add("stats-helper",(function(e){"use strict";var t;t=YUI.Env.isServer?require("querystring").stringify:function(e){var t,r,a,o=[];for(t in e)if(e.hasOwnProperty(t))if(Array.isArray(e[t]))for(r=0,a=e[t].length;r<a;r++)o.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t][r]));else o.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return o.join("&")},e.StatsHelper=function(){},e.StatsHelper.prototype.moveToFrontOfArray=function(e,t){var r=-1;return e.forEach((function(e,a){e===t&&(r=a)})),r>-1&&e.unshift(e.splice(r,1)[0]),e},e.StatsHelper.prototype.moveToEndOfArray=function(e,t){var r=-1;return e.forEach((function(e,a){e===t&&(r=a)})),r>-1&&(e.push(e[r]),e.splice(r,1)),e},e.StatsHelper.prototype.whichChild=function(e){for(var t=0;null!==(e=e.previousElementSibling);)++t;return t},e.StatsHelper.prototype.getRoundedRectanglePath=function(e,t,r,a,o,n,s){var c,i=e[0],p=e[1],u=t[0],f=t[1];return c="M"+(i+r)+","+p,c+="h"+(u-2*r),o?c+="a"+r+","+r+" 0 0 1 "+r+","+r:(c+="h"+r,c+="v"+r),c+="v"+(f-2*r),s?c+="a"+r+","+r+" 0 0 1 "+-r+","+r:(c+="v"+r,c+="h"+-r),c+="h"+(2*r-u),n?c+="a"+r+","+r+" 0 0 1 "+-r+","+-r:(c+="h"+-r,c+="v"+-r),c+="v"+(2*r-f),a?c+="a"+r+","+r+" 0 0 1 "+r+","+-r:(c+="v"+-r,c+="h"+r),c+="z"},e.StatsHelper.prototype.getIdFromParams=function(e){var r=t(e);return""===r&&(r=1),r},e.StatsHelper.prototype.convertStorageTotalToRealNumber=function(e){var t=e;return-1===e&&(t=-1),t},e.StatsHelper.prototype.convertStorageAmountToRealNumber=function(e){var t,r,a;return e=parseInt(e,10)||1,t=Math.ceil(Math.log(e)/Math.LN10),r=Math.floor(t/3),a=e/Math.pow(10,3*r),a=Math.floor(100*a)/100},e.StatsHelper.prototype.convertNaturalLanguageDateToRealDateTimestamp=function(t,r){var a,o="";switch(a=e.moment(),r){case"today":o=a;break;case"yesterday":o=a.subtract(1,"days");break;case"thisweek":case"week":o=a.startOf("week");break;case"lastweek":o=a.subtract(1,"weeks").startOf("week");break;case"twoweeksago":case"theweekbeforethat":o=a.subtract(2,"weeks").startOf("week");break;case"threeweeksago":case"theweekbeforetheweekbeforethat":o=a.subtract(3,"weeks").startOf("week")}return""!==o&&(o=new e.TimezoneHelper(t,o.format("X"),"+00:00").toFormat("YYYY-MM-DD")),o}}),"@VERSION@",{affinity:"",requires:["flickr-promise","event-custom","moment","timezone-helper"],optional:[]});